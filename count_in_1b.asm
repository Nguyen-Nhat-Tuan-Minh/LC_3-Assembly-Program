.ORIG x3000

REWIND

IN

LD R2, COUNTER
AND R1, R1, #0 

MAIN
LD R4, MASK
AND R4, R4, R0
BRz UPDATE

ADD R1, R1, #1

UPDATE
ADD R0, R0, R0
ADD R2, R2, #-1
BRp MAIN

LD R0, ASCII
ADD R0, R0, R1
OUT

LD R0, NEWLINE
OUT

BR REWIND

HALT

COUNTER .FILL #16
MASK .FILL x8000
ASCII .FILL #48
MSG .STRINGZ "Type a character: "
NEWLINE .FILL #10

.END