.ORIG x3010

LD R0, NEWLINE
OUT
LD R2, INIT 
LD R3, COUNTER
LD R6, STO
JSR LOOKUP
LD R1, ASCII
AND R2, R2, #0
ADD R3, R0, #0 

OUTLOOP
ADD R2, R2, #1
ADD R3, R3, #-10
BRzp OUTLOOP

ADD R2, R2, #-1
ADD R3, R3, #10

ADD R0, R1, R2
OUT
ADD R0, R1, R3
OUT

HALT

INIT .FILL x3000
STO .FILL x3200
COUNTER .FILL #16
SAVER7 .BLKW 0
NEWLINE .FILL #10
ASCII .FILL #48

LOOKUP
ST R7, SAVER7
AND R5, R5, #0

EVENLOOP
LDR R1, R2, #0
AND R4, R1, #1
BRp UPDATE

STR R1, R6, #0
ADD R5, R5, #1
ADD R6, R6, #1

UPDATE
ADD R2, R2, #1
ADD R3, R3, #-1
BRp EVENLOOP

LD R6, STO
AND R2, R2, #0
LDR R0, R6, #0

MAXLOOP
LDR R1, R6, #0
NOT R3, R1
ADD R3, R3, #1
ADD R3, R3, R0 ; R3 = R0 - R1
BRzp DATE

ADD R0, R1, #0

DATE
ADD R6, R6, #1
ADD R5, R5, #-1
BRp MAXLOOP

LD R7, SAVER7
RET

.END