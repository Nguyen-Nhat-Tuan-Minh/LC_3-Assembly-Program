.ORIG x3000

LDI R1, X
LDI R2, Y
ADD R1, R1, R2
AND R7, R1, #1
BRz EVEN
STI R7, OFFSET ; BIT-1 IN LOCATION x4003 INDICATES AN ODD SUM OF 2 NUMBER
BR NEXT
EVEN
AND R7, R7, #0
STI R7, OFFSET ; BIT-0 IN LOCATION x4003 INDICATES AN EVEN SUM OF 2 NUMBER
NEXT
AND R0, R0, #0
LD R3, SHIFT_OP
LD R4, SHIFT_MASK
LD R2, LEN
SHIFT_LOOP
AND R5, R4, R1
BRz UPDATE

ADD R0, R0, R3

UPDATE
ADD R4, R4, R4
ADD R3, R3, R3
ADD R2, R2, #-1
BRp SHIFT_LOOP

LD R1, SIGN_CHECK
AND R1, R1, R0
BRz STORE
LD R1, SIGN
ADD R0, R0, R1
STORE
STI R0, MED

HALT

X .FILL x4000
Y .FILL x4001
MED .FILL x4002
OFFSET .FILL x4003
SHIFT_OP .FILL x0001
SHIFT_MASK .FILL x0002
LEN .FILL #15
SIGN_CHECK .FILL x4000 ; 0b0100_0000_0000_0000
SIGN .FILL x8000

.END